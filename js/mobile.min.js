//main
// features : 
// 	- image preloader
// 	- parallax
// 	- page bottom to top scroller
// 	- modal-box
// 	- hasher
// closure for security
(function(e,t,n){var r=this.nescafe||{},i=e("#nescafe"),s=e("#main"),o=e("nav li"),u=e("nav a"),a=e("header"),f=e("footer"),l=e("header nav"),c=e(".controller .open"),h=e(".controller .close"),p=e(".leftarrow"),d=e(".rightarrow"),v=!1,m=!1,g=!1,y=!1,b={"kakao-tozu-ve-taze-cilek-ile":{title:"Küçük Dokunuşlar",desc:"Küçük bir dokunuşla daha keyifli bir NESCAFÉ® Ice içmeye ne dersin? İşte size yepyeni bir öneri: Nescafe Ice’ını hazırlayıp koyduğun bardağa krem şanti sıkın, kremasının üstüne küçük meyve parçalarıyla süsleyip muhteşem tatlar yaratabilirsiniz. Tam ağzınıza layık, afiyet olsun!!"},"cikolata-ve-kremali":{title:"Küçük Dokunuşlar",desc:"Hazırladığınız tarifleri bardağınıza koymadan önce, bardağın kenarlarını soğuk süt ile ıslatın. Ayrı bir tabakta koyacağınız kakao veya hindistan cevizi tozlarına, bardağın ıslanan kenarlarını batırın. Hemen arkasından süslü bardağınıza koyacağınız NESCAFÉ® Ice ile keyfinize keyif katın!!!"},"dondurmali-ve-taze-seftalili":{title:"Küçük Dokunuşlar",desc:"Hazırladığınız tarifleri bardağınıza koymadan önce, bardağın kenarlarını süt ile ıslatın. Ayrı bir tabakta koyacagınız hındıstan cevızı tozlarına, bardagın ıslanan kenarlarını batırın. Hemen arkasından süslü bardağınıza koyacağınız NESCAFÉ® Ice ile keyfinize keyif katın!!!"},"meyveli-yogurtlu":{title:"Küçük Dokunuşlar",desc:"NESCAFÉ® Ice’ını hazırlayıp koyduğun bardağı krem şanti ile süsleyip, kremasının üstüne çikolata rendelesen hiç fena olmaz. Afiyet olsun!"},"taze-muz-ile":{title:"Küçük Dokunuşlar",desc:"Çikolatalı Pasta süslerini hazırladığınız NESCAFÉ® Ice karışımın üstüne serpiştirirek daha süslü bir NESCAFÉ® Ice hazırlayabilirsiniz."},"muzlu-ve-cikolata-aromali":{title:"Küçük Dokunuşlar",desc:"Küçük bir dokunuşla daha keyifli bir NESCAFÉ® Ice içmeye ne dersin? İşte size yepyeni bir öneri:NESCAFÉ® Ice’ını hazırlayıp koyduğun bardağa krem şanti sıkın, kremasının üstüne küçük meyve parçalarıyla süsleyip muhteşem tatlar yaratabilirsiniz. Tam ağzınıza layık, afiyet olsun!!"},"cikolatali-ve-taze-naneli":{title:"Küçük Dokunuşlar",desc:"Küçük bir dokunuşla daha keyifli bir NESCAFÉ® Ice içmeye ne dersin? İşte size yepyeni bir öneri:  NESCAFÉ® Ice’ını hazırlayıp koyduğun bardağa krem şanti sıkın, kremasının üstüne çikolata rendeleyerek muhteşem tatlar yaratabilirsiniz Tam ağzınıza layık, afiyet olsun!!"},"nescafe-orjinal":{title:"Küçük Dokunuşlar",desc:"Daha soğuk bir NESCAFÉ® Ice için kullandığınız buz kalıplarında, su yerine kahve karışımı kullanarak (1 su bardağına 1 tatlı kaşığı NC Classic) kahveli buz kalıpları yapabilirsiniz."},"muz-aromali":{title:"Küçük Dokunuşlar",desc:"Küçük bir dokunuşla daha keyifli bir NESCAFÉ® Ice içmeye ne dersin? İşte size yepyeni bir öneri:Nescafe Ice’ını hazırlayıp koyduğun bardağa krem şanti sıkın, kremasının üstüne küçük meyve parçalarıyla süsleyip muhteşem tatlar yaratabilirsiniz. Tam ağzınıza layık, afiyet olsun!!"},"kakao-toz-ile":{title:"Küçük Dokunuşlar",desc:"Kakaolu NESCAFÉ® Ice’ını daha da keyifli gelmesini ister misin? NESCAFÉ® Ice’ınızı bardağa koymadan önce, bardağın iç yüzüne yukarıdan aşağı doğru şeritler halinde çikolata sosu sıkın. Hemen ardından Nescafé Ice’ınızı ekleyin. Ne kadar güzel görünüyor değil mi?"},"cikolata-ve-vanilyali-dondurmali":{title:"Küçük Dokunuşlar",desc:"NESCAFÉ® Ice’ınızı bardağa koymadan önce, bardağın iç yüzüne yukarıdan aşağı doğru şeritler halinde çikolata sosu sıkın. Hemen ardından NESCAFÉ® Ice’ınızı ekleyin. Ne kadar güzel görünüyor değil mi?"}};r={init:function(){t.scrollTo(0,1);e("#main").bxSlider({adaptiveHeight:!0,pagerCustom:"#bx-pager"});r.initializeMenu();r.bindModal();e(t).on("resize",function(){r.updateDimensions()})},initializeMenu:function(t){TweenMax.to(a,1,{alpha:1,ease:Quart.easeOut});a[0].style.width=t+"px";u.on("click",function(){if(!e(this).parent().hasClass("active")){o.removeClass("active");e(this).parent().addClass("active")}r.closeMenu()});c.on("click",function(){v||r.openMenu()});h.on("click",function(){v&&r.closeMenu()})},openMenu:function(){a[0].style.zIndex=3;if(!g){r.appendOverlay();g=!0}TweenMax.to(a,1,{delay:0,top:0,ease:Quart.easeInOut,onComplete:function(){c.hide();h.show();v=!0}})},closeMenu:function(){r.removeOverlay();TweenMax.to(a,1,{delay:0,top:-343,ease:Quart.easeOut,onComplete:function(){h.hide();c.show();v=!1}})},hideMenu:function(){TweenMax.to(a,1,{alpha:0,ease:Quart.easeOut});m=!1},showMenu:function(){e(n).on("trans:end",function(){TweenMax.to(a,1,{alpha:1,ease:Quart.easeOut});m=!0})},appendOverlay:function(){var t=e("<div />");t.addClass("overlay");t.css({width:n.body.clientWidth+"px",height:n.body.clientHeight+"px","background-color":"rgba(0,0,0,.7)",position:"absolute",left:"0",top:"0","z-index":2,opacity:0});t.on("click",function(){r.closeMenu();r.destroyModal();r.removeOverlay()});e("header").after(t);TweenMax.to(t,1,{alpha:1,ease:Quart.easeOut});r.updateDimensions()},openModal:function(i){t.scrollTo(0,1);g=!0;var s=e("<div />");s.addClass("modal "+i);s.css({background:"url(img/iphone/touch/"+i+"-touch.png) no-repeat left top",width:n.body.clientWidth+"px",height:n.body.clientWidth+"px","margin-left":-(n.body.clientWidth/2)+"px","margin-top":-(n.body.clientWidth/2)+"px"});a[0].style.zIndex=1;var o=e("<div />"),u=e("<span />");u.addClass("closebtn");var f=e("<h1 />");f.html(b[i].title);var l=e("<p />");l.html(b[i].desc);o.append(u);o.append(f);o.append(l);s.append(o);e(n.body).after().append(s);u.on("click",function(){r.destroyModal();r.removeOverlay()});TweenMax.to(s,1,{alpha:1,ease:Quart.easeOut})},destroyModal:function(){a[0].style.zIndex=2;var t=e(".modal");TweenMax.to(t,1,{alpha:0,ease:Quart.easeOut,onComplete:function(){t.remove()}})},removeOverlay:function(){if(g){var t=e(".overlay");TweenMax.to(t,1,{alpha:0,ease:Quart.easeOut,onComplete:function(){t.remove()}});g=!1}},bindModal:function(){e(".touches").on("click",function(){r.openModal(e(this).data("drink"));r.appendOverlay()})},addListenerToCurrent:function(t){var i=e("article[data-drink='"+t+"']"),s=r.getsupportedprop(["transform","MozTransform","WebkitTransform","msTransform","OTransform"]);utils.deviceDescription.type!="iPad"&&i.on("mousemove",function(){var r=10,o=n.body.clientWidth,u=mouse.x*r/o-5;u.toFixed(2);if(t=="index"){var a=e(".ice",i)[0].style,f=e(".motto",i)[0].style,l=e(".nescafe",i)[0].style;if(typeof s!="undefined")for(var c=0;c<ices.length;c++)ices[c].style[s]="translateX("+u*randomArr[c]+"px) rotate3d(0, 0, 1, "+u*5+"deg)";a[s]="translateX("+u+"px)";f[s]="translateX("+ -u+"px)";l[s]="rotate3d(0, 0, 1, "+u*.2+"deg)"}else{var h=e(".left",i)[0].style,p=e(".right",i)[0].style,d=e(".parallax",i)[0].style,v=e(".glass",i)[0].style;if(typeof s!="undefined"){h[s]="translateX("+u+"px)";p[s]="translateX("+u+"px)";d[s]="translateX("+u*2+"px)";v[s]="rotate3d(0, 0, 1, "+u*.2+"deg)"}}})},getsupportedprop:function(e){var t=n.documentElement;for(var r=0;r<e.length;r++)if(e[r]in t.style)return e[r]},getCurrentIndex:function(){return e.inArray(hasher.getHash(),pages)},updateDimensions:function(){a.css({width:n.body.clientWidth});l.css({width:n.body.clientWidth});e(".overlay").length>0&&e(".overlay").css({width:n.body.clientWidth,height:n.body.clientHeight})}};e(n).ready(function(){r.init()});t.NESCAFE=r})(jQuery,window,document);